## Fields Needed from Vendor

### For Current Workspace Metrics (First Paragraph)

1. **Creation Timestamp**
   - Essential for "Newly created" and "Recently created" metrics
   - Example format: `"createdAt": "2023-09-01T14:32:45Z"`

2. **Last Activity Timestamp**
   - Required for "Active workspaces" tracking
   - Example format: `"lastActivityAt": "2023-10-15T09:17:23Z"`

3. **Consistent Field Naming**
   - Standardize field names (workspaceId vs workspaceID, eonid vs eonID)
   - Standardize data types (archived as boolean, not string)

### For Workspace Data Metrics (Second Paragraph)

4. **Content Metrics**
   - Line counts: `"lineCount": 256`
   - View counts: `"viewCount": 42`
   - Size information: `"contentSizeBytes": 15360`

### For Workspace Output (Third Paragraph)

5. **Node Information**
   - Node types: `"nodeTypes": { "static": 12, "deployment": 8 }`
   - Or separate counts: `"staticNodeCount": 12, "deploymentNodeCount": 8`

### For Product Usage (Fourth Paragraph)

6. **Access Method Tracking**
   - Access method: `"accessMethod": "API"` (or "CLI", "UI")
   - Access timestamp: `"accessedAt": "2023-10-16T14:25:17Z"`
   - User identifier: `"accessedBy": "user-123"`

## Ideal Response Structure

Here's what an ideal response item should look like:

```json
{
  "_id": "64f1a2bcd0e5e8a5f3d8a7e1",
  "instance": "server-1",
  "workspaceId": 101,
  "eonid": 5001,
  "readRole": "user-role",
  "writeRole": "admin-role",
  "archived": false,
  
  "createdAt": "2023-09-01T14:32:45Z",
  "lastActivityAt": "2023-10-15T09:17:23Z",
  
  "metrics": {
    "lineCount": 256,
    "viewCount": 42,
    "contentSizeBytes": 15360
  },
  
  "nodes": {
    "static": 12,
    "deployment": 8
  },
  
  "accessHistory": [
    {
      "method": "API",
      "timestamp": "2023-10-16T14:25:17Z",
      "userId": "user-123"
    },
    {
      "method": "CLI",
      "timestamp": "2023-10-15T11:02:36Z",
      "userId": "user-456"
    }
  ]
}
```

## If Vendor Can't Change Response Format

If the vendor can't change their API response format, you have two options:

1. **Transform Data on Ingestion**:
   - Create a data pipeline that enriches/transforms the vendor data when you receive it
   - Store the enriched data in your MongoDB

2. **Track Separately**:
   - Keep the vendor's original data
   - Create separate collections to track the additional metrics yourself
   - Use a correlation ID (like workspaceId) to link records

For the minimal implementation, you absolutely need at least:
- Creation timestamps (can use MongoDB ObjectId's timestamp as fallback)
- Activity tracking for each workspace
- Consistent field naming and data types


Subject: Request for Standardized Data Fields for Structurizr Analytics

Dear [Vendor’s Name],

I hope you’re doing well. As we refine our analytics for Structurizr, we want to ensure we capture accurate insights efficiently. To streamline this, we need confirmation on key data fields to ensure consistency and completeness.

Key Fields Needed
	1.	Workspace Activity Tracking
	•	Creation Timestamp (e.g., "createdAt": "2023-09-01T14:32:45Z")
	•	Last Activity Timestamp (e.g., "lastActivityAt": "2023-10-15T09:17:23Z")
	•	Field Naming Consistency (workspaceId vs workspaceID, archived as a boolean)
	2.	Workspace Metrics
	•	Line count ("lineCount": 256)
	•	View count ("viewCount": 42)
	•	Content size ("contentSizeBytes": 15360)
	3.	Node Data
	•	Breakdown by type ("nodeTypes": { "static": 12, "deployment": 8 })
	4.	User Access Tracking
	•	Access method ("accessMethod": "API" | "CLI" | "UI")
	•	Access timestamp ("accessedAt": "2023-10-16T14:25:17Z")
	•	User identifier ("accessedBy": "user-123")

Ideal Data Format

Here’s an example of how we’d like the data structured:

{
  "workspaceId": 101,
  "createdAt": "2023-09-01T14:32:45Z",
  "lastActivityAt": "2023-10-15T09:17:23Z",
  "metrics": {
    "lineCount": 256,
    "viewCount": 42,
    "contentSizeBytes": 15360
  },
  "nodes": { "static": 12, "deployment": 8 },
  "accessHistory": [
    { "method": "API", "timestamp": "2023-10-16T14:25:17Z", "userId": "user-123" }
  ]
}

Could you confirm whether these fields are available and if there are any variations we should account for? A standardized response format will help us process the data efficiently and ensure accurate analytics.

Looking forward to your response. Let us know if you need any clarifications.

Best,
[Your Name]
[Your Position]
[Your Company]
